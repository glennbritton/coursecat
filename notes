
-first step is to grep the sis courses source for a particular TERM
(Summer, Fall Winter) and the year....ie Fall-2014
and put it in a temporary file, keeping only the first two columns, 
or everything before the second pipe
eg.   grep Fall-2014 SIScourses |sed 's/\|N\|.*$//'  |sed 's/\|//' > courselist

Here is the head of the SIScourses file:
External_Course_Key|Course_Id|Available_Ind|Course_Name|Allow_Guest_Ind
20159ABP100Y1YLEC0101              |Fall-2015-ABP100Y1-Y-LEC0101       |N|Intro to Academic Studies     |N
20169ABP100Y1YLEC0101              |Fall-2016-ABP100Y1-Y-LEC0101       |N|Intro to Academic Studies     |N
20155ABS201Y1YLEC0101              |Summer-2015-ABS201Y1-Y-LEC0101     |N|Intro Indigenous Stu          |N


using marco's example, 12514 lines in courselist if he were to look for 
the Fall-2014 term.


strategy to reproduce the output file:
         since the primary and secondary course codes differ depending
         on which campus the course is offered at, need a way to 
         process the courselist to identify and/or divide it up accordingly.
     From what Marco showed me, the alphanumeric character before "-.-"
     or "-..-" identifies the campus
Therefore,
- grep 1-.- courselist  should find all st.george courses  (5812 courses)
- grep 3-.- courselist  should find all UTSC courses  (1835 courses)
- grep 5-.- courselist  should find all UTM courses  (2013 courses)
- grep H-.- courselist  should find all xxx courses  (2007 courses)
- grep Y-.- courselist  should find all yyy courses  (741 courses)
- grep 0-.- courselist  should find all zzz courses  ( 7 courses)

cat courselist |grep -v 1-.-|grep -v 3-.-|grep -v 5-.-|grep -v H-.-|grep -v Y-.-|grep -v 0-.-
|wc -l yields 99 remaining courses with 2-letters between the dashes:
  H-..-    Y-..-    and TWO SPECIAL CASES  1-..-

Sanity check with "bc"
5812+1835+2013+2007+741+7+99 =
12514 
Therefore, ALL FALL-2014 courses would be mapped to course codes file???


-converted "codes" to a flat file named codes
with numeric prefixes:  1=st.george  3=utsc 5=utm 9=grad
therefore 
XActivityCode???  secondary  primary  OR
courseID [tab]  secondary CategoryID [tab]  primary categoryID
Marco refers to these with colons instead of tabs from his source...(16nov2015)


-output file needs a header: External_Course_Key|EXTERNAL_CATEGORY_KEY|AVAILABLE_IND
-if a course has a primary and secondary "org code", there will be 2 separate lines
in the output file for each.....might be handy to sort this output file for 
visual inspection (can see two lines for a course with primary and secondary codes)
  eg.
     20149WYT6406HFLEC0101              |TST|Y
     20149WYT6406HFLEC0101              |WYC|Y
-all lines in the ouput file need to end in |Y  (availability )  ....trivial

sanity check....look for unique course TERMS...ie 20139 20149 etc
and run script against them

NB ./aperlscript3 |grep -v \|\| >foo    gets rid of empty lines with no primary key


S U M M E R   T E R M  S P E C I F I C A T I O N S
(not defined until the week of March 23, 2015)

The first column of  the courselist from the SIS database 
is the  "External Course Key"  the second column is the courseid.
There are extra characters ( "F" and "S" ) inserted as a prefix
to the 3-letter portion of the "Courseid"  for the SUMMER term ONLY,
and not for all courses.   F=Firsthalf    S=Secondhalf

Algorithm 1
grep "20155F" AND "20155S" on the intermediate termcourses file
to catch ALL of these exceptions, and process them separately?

WHAT About 3-letter Courseid's  that start with F and S.....
need to process them normally.

From the main perl script (testscript
$f2= External Course Key stripped of the year and term prefix eg (20155)
$g1=unpack(A3,$f2)  first 3 characters of $f2)


Update August 2106
SPECIAL CASES CURRENTLY REQUIRING MELVIN to 
Certain courses from the faculty of medicine (and possibly other departments) need to be duplicated
in the OUTPUT text file with a second "primary categoryID" so that administrators in two different "zones"
(as Marco calls them) can make changes to courses.   I guess that "primary categoryID" is perhaps
similar to a "zone" in BlackBoard
Immunology is one such SPECIAL case.   All IMM courses are "primary categoryID"=FAS (only St.George campus)
 secondary categoryID IMM,    or graduate course with "primary categoryID"=SGS and NO secondary categoryID
 Algorithm:
 -run testscript normally, and it will catch all IMM courses (St. George and GRADUATE)
 -get all IMM courses for particular TERM with:   grep 20169IMM SIScourslist >IMMcourses (17 in this case)
 -create a IMMcodes file, and add a section in testscript that runs same logic as UTM, UTS, GRAD, ST.GEORGE
 but pairs IMMcodes file and IMMcourses file to build associative array
